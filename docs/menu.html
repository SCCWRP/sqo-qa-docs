<h1>SQOUnified R Package - QA Instructions</h1>
<p>Hello! Thank you for all who volunteered to participate in the work of QA-ing the <a href="https://github.com/SCCWRP/SQOUnified" target="_blank">SQOUnified R Package</a>.</p>

<p>This small site is a place where you can view instructions on how to QA the R package, and each LOE has its own page:</p>

<!-- This section will render as an li-->
<ul>
    <li><a href="tox">Toxicity</a></li>
    <li><a href="chemistry">Chemistry</a></li>
    <li><a href="benthic">Benthic</a></li>
</ul>

<p>There is also a <a href="integrated">page</a> for calculating the overall integrated site assessment score from combining the 3 lines of evidence</p>
  
<br>

<h2>Overview</h2>
<p>
    The <a href="https://github.com/SCCWRP/SQOUnified" target="_blank">SQOUnified R Package</a>
    is a package that is designed to help users calculate Sediment Quality Objective (SQO) Scores based on the three lines of evidence - Toxicity, Chemistry, and Benthic.
    There is a suite of functions available in the package that can help users calculate SQO Scores, which are covered in more detail on each LOE's page.
</p>
<p>
    <b>Those conducting QA on the R package will be responsible for ensuring the functions in the package are providing the correct and/or expected output.</b>
    This will involve running the functions on the sample data provided, or any other input dataset, and comparing the output to the expected output.
</p>
<p>
    You may determine what the expected output should be by any means necessary, 
    such as the Excel Tool (downloadable <a href="https://ftp.sccwrp.org/pub/download/TOOLS/SQO/CalSQOCalcToolVer5.10.xls" target="_blank">here</a>), or any other 
    <a href="https://www.sccwrp.org/about/research-areas/additional-research-areas/sediment-quality/sediment-quality-assessment-tools/" target="_blank">SQO Assessment Tools</a> available.
    You may use any other methods that you wish to calculate the SQO Scores, as long as you can verify that the output is correct. Then your output should be compared with that of the R package.
</p>
<p>
    <b>If you find any discrepancies between the expected output and the output from the R package, 
    please report them to the maintainers and developers of the package at SCCWRP</b> (<a href="mailto:sqo-devs@sccwrp.org">sqo-devs@sccwrp.org</a>).
    You may also do so by creating an issue on the <a href="https://github.com/SCCWRP/SQOUnified" target="_blank">GitHub repository</a>.
</p>

<br>
<h2>Basic Installation Instructions</h2>
<p>These instructions assume that you already have <a href="https://cran.r-project.org/bin/windows/base/" target="_blank">R</a> and <a href="https://posit.co/download/rstudio-desktop/" target="_blank">RStudio Desktop</a> installed on your system.</p>

<p>Here is a section of code that you can copy and paste that should install the R Package on your system:</p>
<div class="code-block-container">
<button class="copy-code-button">Copy Code</button>
<pre class="code-block">
<code class = "code-block-content"
># Install the devtools package
install.packages('devtools')

# Install the SQOUnified R Package
devtools::install_github("SCCWRP/SQOUnified")</code>
</pre>
</div>

<br>
<p>If you want to load the R package into your environment or current R session, you may do so by running:</p>
<div class="code-block-container">
<button class="copy-code-button">Copy Code</button>
<pre class="code-block">
<code class = "code-block-content"
># Load the package into the current R session
library(SQOUnified)</code>
</pre>
</div>

<br>
<h2>Other Basic Information</h2>
<p>
Upon loading the SQOUnified package, there will be example data available to you in your environment automatically. 
Only a subset of each example dataframe is displayed
</p>

<p>
    <b>Note</b>: <u>If you use your own input data, it should look like these sample dataframes below</u>.
    The suite of functions available in the SQOUnified package <b>do not</b> take excel or csv paths as arguments, but rather dataframes or tibbles.
    For use of your own data, you will need to read in your data using the appropriate R functions, 
    and then pass the resulting dataframes to the SQOUnified functions.
    Please note that your input data's structure should be modeled after the sample dataframes provided.
</p>

<h3>
    <p>Toxicity data:</p>
</h3>

<div class="code-block-container">
<button class="copy-code-button">Copy Code</button>
<pre class="code-block">
<code class = "code-block-content"
># print the toxicity sample data
print(head(tox_sampledata, 10))</code>
</pre>
</div>

<div class="table-container">
<table>
    <thead>
        <tr>
            <th>stationid</th>
            <th>toxbatch</th>
            <th>species</th>
            <th>sampletypecode</th>
            <th>matrix</th>
            <th>labrep</th>
            <th>result</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>0000</td>
            <td>03/02B18eea</td>
            <td>Eohaustorius estuarius</td>
            <td>CNEG</td>
            <td>Whole Sediment</td>
            <td>1</td>
            <td>100</td>
        </tr>
        <tr>
            <td>0000</td>
            <td>03/02B18eea</td>
            <td>Eohaustorius estuarius</td>
            <td>CNEG</td>
            <td>Whole Sediment</td>
            <td>2</td>
            <td>100</td>
        </tr>
        <tr>
            <td>0000</td>
            <td>03/02B18eea</td>
            <td>Eohaustorius estuarius</td>
            <td>CNEG</td>
            <td>Whole Sediment</td>
            <td>3</td>
            <td>95</td>
        </tr>
        <tr>
            <td>0000</td>
            <td>03/02B18eea</td>
            <td>Eohaustorius estuarius</td>
            <td>CNEG</td>
            <td>Whole Sediment</td>
            <td>4</td>
            <td>100</td>
        </tr>
        <tr>
            <td>0000</td>
            <td>03/02B18eea</td>
            <td>Eohaustorius estuarius</td>
            <td>CNEG</td>
            <td>Whole Sediment</td>
            <td>5</td>
            <td>100</td>
        </tr>
        <tr>
            <td>SampleA</td>
            <td>03/02B18eea</td>
            <td>Eohaustorius estuarius</td>
            <td>Grab</td>
            <td>Whole Sediment</td>
            <td>1</td>
            <td>25</td>
        </tr>
        <tr>
            <td>SampleA</td>
            <td>03/02B18eea</td>
            <td>Eohaustorius estuarius</td>
            <td>Grab</td>
            <td>Whole Sediment</td>
            <td>2</td>
            <td>5</td>
        </tr>
        <tr>
            <td>SampleA</td>
            <td>03/02B18eea</td>
            <td>Eohaustorius estuarius</td>
            <td>Grab</td>
            <td>Whole Sediment</td>
            <td>3</td>
            <td>10</td>
        </tr>
        <tr>
            <td>SampleA</td>
            <td>03/02B18eea</td>
            <td>Eohaustorius estuarius</td>
            <td>Grab</td>
            <td>Whole Sediment</td>
            <td>4</td>
            <td>15</td>
        </tr>
        <tr>
            <td>SampleA</td>
            <td>03/02B18eea</td>
            <td>Eohaustorius estuarius</td>
            <td>Grab</td>
            <td>Whole Sediment</td>
            <td>5</td>
            <td>0</td>
        </tr>
    </tbody>
</table>
</div>

<br>

<h3>
    <p>Chemistry data:</p>
</h3>

<div class="code-block-container">
<button class="copy-code-button">Copy Code</button>
<pre class="code-block">
<code class = "code-block-content"
># print the chemistry sample data
print(head(chem_sampledata, 12))</code>
</pre>
</div>
<p>
    Be mindful to not include QA sampletypes, fieldduplicates, or labreplicates which may lead to duplicates in the dataset. 
    The chemistry functions will remove duplicates, and will issue a warning when it does so.
</p>

<div class="table-container">
    <table>
        <thead>
            <tr>
                <th>stationid</th>
                <th>analytename</th>
                <th>result</th>
                <th>rl</th>
                <th>mdl</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>0000</td>
                <td>Mercury</td>
                <td>-88.0</td>
                <td>0.0300</td>
                <td>0.0030</td>
            </tr>
            <tr>
                <td>B18-10311</td>
                <td>Mercury</td>
                <td>0.13</td>
                <td>0.0171</td>
                <td>0.0006</td>
            </tr>
            <tr>
                <td>B18-10165</td>
                <td>Aluminum</td>
                <td>859.76</td>
                <td>5.0000</td>
                <td>1.0000</td>
            </tr>
            <tr>
                <td>B18-10165</td>
                <td>Iron</td>
                <td>420.21</td>
                <td>5.0000</td>
                <td>1.0000</td>
            </tr>
            <tr>
                <td>B18-10165</td>
                <td>Barium</td>
                <td>63.36</td>
                <td>0.0500</td>
                <td>0.0250</td>
            </tr>
            <tr>
                <td>B18-10165</td>
                <td>Nickel</td>
                <td>64.70</td>
                <td>0.0200</td>
                <td>0.0100</td>
            </tr>
            <tr>
                <td>B18-10165</td>
                <td>Copper</td>
                <td>65.37</td>
                <td>0.0050</td>
                <td>0.0025</td>
            </tr>
            <tr>
                <td>B18-10165</td>
                <td>Lead</td>
                <td>65.37</td>
                <td>0.0050</td>
                <td>0.0025</td>
            </tr>
            <tr>
                <td>B18-10165</td>
                <td>Zinc</td>
                <td>66.03</td>
                <td>0.0500</td>
                <td>0.0250</td>
            </tr>
            <tr>
                <td>B18-10165</td>
                <td>Antimony</td>
                <td>66.70</td>
                <td>0.0500</td>
                <td>0.0250</td>
            </tr>
            <tr>
                <td>B18-10165</td>
                <td>Beryllium</td>
                <td>67.37</td>
                <td>0.0500</td>
                <td>0.0250</td>
            </tr>
            <tr>
                <td>B18-10165</td>
                <td>Chromium</td>
                <td>68.03</td>
                <td>0.0050</td>
                <td>0.0025</td>
            </tr>
        </tbody>
    </table>
</div>

<p>
    The chemistry data may also include additional columns such as <b>labreplicate</b>, <b>fieldduplicate</b>, <b>sampletypecode</b> and <b>units</b>.
    If your chemistry data does not include these columns, you may receive a warning. <u>However, you may ignore the warnings if you have prepared the data correctly</u>:
</p>
<ul>
    <li>Labreplicates are removed, leaving only the first replicate</li>
    <li>Field Duplicates are removed, leaving only the first field duplicate</li>
    <li>QA/QC Sampletypes are not included</li>
    <li>
        <u>Cadmium</u>, <u>Copper</u>, <u>Lead</u>, <u>Mercury</u>, and <u>Zinc</u></i> are recorded in <i>parts per <b>million</b></i>, 
        while all other analytes are in <i>parts per <b>billion</b></i>
    </li>
</ul>

<p>If you do include a units column in your dataframe, acceptable units to record parts per million would be</p>
<ul>
    <li>ppm</li>
    <li>ug/g</li>
    <li>ug/g dw</li>
</ul>

<p>Acceptable units to record parts per billion would be</p>
<ul>
    <li>ppb</li>
    <li>ng/g</li>
    <li>ng/g dw</li>
</ul>



<br>
<h3><p>Benthic data:</p></h3>
<div class="code-block-container">
<button class="copy-code-button">Copy Code</button>
<pre class="code-block">
<code class = "code-block-content"
># print the benthic sample data
print(head(benthic_sampledata, 10))</code>
</pre>
</div>

<div class="table-container">
<table>
    <thead>
        <tr>
            <th>StationID</th>
            <th>Replicate</th>
            <th>SampleDate</th>
            <th>Latitude</th>
            <th>Longitude</th>
            <th>SampleDepth</th>
            <th>Taxon</th>
            <th>Abundance</th>
            <th>Salinity</th>
            <th>Stratum</th>
            <th>Exclude</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>B18-10130</td>
            <td>1</td>
            <td>2018-08-07 00:00:00</td>
            <td>32.7</td>
            <td>-117.0</td>
            <td>10</td>
            <td>Theora lubrica</td>
            <td>2</td>
            <td>NA</td>
            <td>Ports</td>
            <td>No</td>
        </tr>
        <tr>
            <td>B18-10130</td>
            <td>1</td>
            <td>2018-08-07 00:00:00</td>
            <td>32.7</td>
            <td>-117.0</td>
            <td>10</td>
            <td>Amphideutopus oculatus</td>
            <td>1</td>
            <td>NA</td>
            <td>Ports</td>
            <td>No</td>
        </tr>
        <tr>
            <td>B18-10130</td>
            <td>1</td>
            <td>2018-08-07 00:00:00</td>
            <td>32.7</td>
            <td>-117.0</td>
            <td>10</td>
            <td>Amphipholis squamata</td>
            <td>3</td>
            <td>NA</td>
            <td>Ports</td>
            <td>No</td>
        </tr>
        <tr>
            <td>B18-10130</td>
            <td>1</td>
            <td>2018-08-07 00:00:00</td>
            <td>32.7</td>
            <td>-117.0</td>
            <td>10</td>
            <td>Amphiuridae</td>
            <td>2</td>
            <td>NA</td>
            <td>Ports</td>
            <td>No</td>
        </tr>
        <tr>
            <td>B18-10130</td>
            <td>1</td>
            <td>2018-08-07 00:00:00</td>
            <td>32.7</td>
            <td>-117.0</td>
            <td>10</td>
            <td>Anoplodactylus viridintestinalis</td>
            <td>4</td>
            <td>NA</td>
            <td>Ports</td>
            <td>No</td>
        </tr>
        <tr>
            <td>B18-10130</td>
            <td>1</td>
            <td>2018-08-07 00:00:00</td>
            <td>32.7</td>
            <td>-117.0</td>
            <td>10</td>
            <td>Asthenothaerus diegensis</td>
            <td>2</td>
            <td>NA</td>
            <td>Ports</td>
            <td>No</td>
        </tr>
        <tr>
            <td>B18-10130</td>
            <td>1</td>
            <td>2018-08-07 00:00:00</td>
            <td>32.7</td>
            <td>-117.0</td>
            <td>10</td>
            <td>Chondrochelia dubia Cmplx</td>
            <td>1</td>
            <td>NA</td>
            <td>Ports</td>
            <td>No</td>
        </tr>
        <tr>
            <td>B18-10130</td>
            <td>1</td>
            <td>2018-08-07 00:00:00</td>
            <td>32.7</td>
            <td>-117.0</td>
            <td>10</td>
            <td>Crepidula fornicata</td>
            <td>1</td>
            <td>NA</td>
            <td>Ports</td>
            <td>No</td>
        </tr>
        <tr>
            <td>B18-10130</td>
            <td>1</td>
            <td>2018-08-07 00:00:00</td>
            <td>32.7</td>
            <td>-117.0</td>
            <td>10</td>
            <td>Crucibulum spinosum</td>
            <td>2</td>
            <td>NA</td>
            <td>Ports</td>
            <td>No</td>
        </tr>
        <tr>
            <td>B18-10130</td>
            <td>1</td>
            <td>2018-08-07 00:00:00</td>
            <td>32.7</td>
            <td>-117.0</td>
            <td>10</td>
            <td>Diplocirrus sp SD1</td>
            <td>3</td>
            <td>NA</td>
            <td>Ports</td>
            <td>No</td>
        </tr>
    </tbody>
</table>
</div>